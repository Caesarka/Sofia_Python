### 0. Собрать структуру проеткта на бэкенд (входной файл, папки, бд), развернуть это внутри вирт. откружения

## 1. Сделать базовые endponts, которые будут выдавать через API данные об объектах недвижимости из БД:

- GET:`api/realty` - выдает все записи
- GET:`api/realty/{id}` - одна запись
- POST:`api/realty/new` - добавить запись
- PATCH:`api/realty/{id}` - обновить запись
- DELETE:`api/realty/{id}` - удалить запись

## 2. Создать папку services, внутри которой будет находиться логика обработки данных для приложения

## 3. Создать логику для возможности авторизации клиента на сайте

3.1 Создать в БД сущность пользователя, которая хранит информацию о почте, логине, пароле, дате регистрации, роль пользователя (admin, user), статус ользователя (active/inactive)
3.2 Создать доп. сущность Favorites, которая описывает добавление в избранное объекта недвижимости
3.3 Создать API для пользователя:

- POST: `api/user` – создание аккаунта пользователя
- POST: `api/user/auth` – авторизация пользователя
- GET: `api/user` – получение информации о пользователе (себе)
- POST: `api/user/password/recovery` – восстановление пароля (ОПЦ.)
- PATCH: `api/user/password/update` – обновление пароля (ОПЦ.)
- PATCH: `api/user` – изменение информации о пользователе
- DELETE: `api/user` – удаление своего аккаунта (устанавливает статус инактивный аккаунта, автоматически удаляется через месяц (опционально))
- POST: `api/user/recovery` – восстановление аккаунта пользователя (только для удаленного)

3.4. Создать страницы:
– `auth/login` – вход
– `auth/new` – создание аккаунта
– `profile` – просмотр информации об аккаунте
– `profile/edit` редактирование информации об аккаунте (на этой странице должна быть кнопка "УДАЛИТЬ ПРОФИЛЬ", которая "разлогинивает" пользователя после нажатия при успешном удалении)

3.5. Реализация логики аутентификаций
- Создать сервис auth.py, в котором нужно описать:
  * Метод шифрования пароля `get_pass_hash`
  * метод проверки пароля по хэшу `verify_pass`
  * Создание JWT-токена сессии `create_access_token`

3.6. Файл конфигурации
Нужно определить файл конфигурации, через который все приложение будет получать различные токены, ключи и другие глобальные переменные (или переменные из env)
- в папку core (создать) добавить файл config.py
- Создать класс настроек (наследует BaseSettings) внутри которого определить переменные-ключи: SECRET_KEY, ALGORITHM, ACCESS_TOKEN_EXPIRE
- также определить конфиг модели, который будет "подхватывать" ключи (если они есть) из env
пример: 
```python
    model_config = SettingsConfigDict(env_file=".env")
```
- создать объект настроек

3.7. Создать файл users.py в services/user
- `get_user_by_email` – получение юзера по почте, возвращает имя пользователя и его хэш-пароль
- `create_user` – создавать новго пользователя в БД, если такого нет (там же проверка), пароль должен быть записан как хэш (использовать `get_pass_hash`)
- `get_user` – получить инфо о пользователе по ID/фильтру

## 4. Создание новых объектов риэлтером
* Риэлтер или админ могут добавлять объекты
* Объект добавленный риэлтером должен модерироваться админом:
  * У объекта есть статус публикации и дата публикации
  * Неопубликованные объекты видны только риэлтеру, добавившему объект, и админу
  * Админ может поменять статус на "неопубликованный". Но в любом случае дата публикации не изменяется
* После публикации объекты видны всем, даже если удален
  * Удаление – это отдельное поле в объекте. Риэлтер полностью удаляет только тот объект, который не опубликован (запись из бд удаляется), в противном случае объект просто получает пометку. 
  * Удаление из базы неопубликованных объектов возможна, если объект не был никогда опубликован (не имеет даты публикации)
* Админ имеет полный доступ к объекту
____
### 4.1 Что сделать:
1. Расширить варианты ролей пользователя.
2. Добавить декоратор, который будет проверять роль юзера (принимает в качестве аргумента дополнительно список ролей, на соответствие которых нужно проверить юзера)
3. Реализовать добавление объекта (зарефакторить):
    * Добавлять по роли
    * Редактировать также по роли
4. Сделать удалени объекта, согласно логике

